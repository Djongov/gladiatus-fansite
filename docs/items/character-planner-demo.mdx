import React, { useState } from 'react';
import Item, { calculateItemStats, BaseItem } from '@site/src/components/Item';
import basesData from '@site/static/data/items/bases.json';

# Character Planner Example

This demonstrates how to use the `Item` component and `calculateItemStats` function to build a character planner.

export const CharacterPlanner = () => {
  const [selectedWeapon, setSelectedWeapon] = useState(basesData.find(i => i.name === 'Long sword'));
  const [weaponRarity, setWeaponRarity] = useState('red');
  const [weaponConditioned, setWeaponConditioned] = useState(true);
  
  const weapons = basesData.filter(item => item.type === 'weapons');
  
  // Calculate stats for display
  const stats = selectedWeapon 
    ? calculateItemStats(selectedWeapon, weaponRarity, weaponConditioned, 'Antonius', 'of Assassination')
    : null;
  
  return (
    <div style={{ border: '1px solid #c2a66a', padding: '20px', background: '#1a1a1a', borderRadius: '8px' }}>
      <h3>Weapon Planner</h3>
      
      <div style={{ marginBottom: '20px' }}>
        <label style={{ display: 'block', marginBottom: '10px' }}>
          Select Base Weapon:
          <select 
            value={selectedWeapon?.name || ''} 
            onChange={(e) => setSelectedWeapon(weapons.find(w => w.name === e.target.value))}
            style={{ marginLeft: '10px', padding: '5px', background: '#2a2a2a', color: '#fff', border: '1px solid #c2a66a' }}
          >
            {weapons.map(weapon => (
              <option key={weapon.name} value={weapon.name}>
                {weapon.name} (Lvl {weapon.level})
              </option>
            ))}
          </select>
        </label>
        
        <label style={{ display: 'block', marginBottom: '10px' }}>
          Rarity:
          <select 
            value={weaponRarity} 
            onChange={(e) => setWeaponRarity(e.target.value)}
            style={{ marginLeft: '10px', padding: '5px', background: '#2a2a2a', color: '#fff', border: '1px solid #c2a66a' }}
          >
            <option value="common">Common (White)</option>
            <option value="green">Green (+25%)</option>
            <option value="blue">Blue (+50%)</option>
            <option value="purple">Purple (+75%)</option>
            <option value="orange">Orange (+100%)</option>
            <option value="red">Red (+125%)</option>
          </select>
        </label>
        
        <label style={{ display: 'block', marginBottom: '10px' }}>
          <input 
            type="checkbox" 
            checked={weaponConditioned}
            onChange={(e) => setWeaponConditioned(e.target.checked)}
          />
          {' '}Conditioned (+25% extra)
        </label>
      </div>
      
      <div style={{ marginBottom: '20px' }}>
        <h4>Preview:</h4>
        {selectedWeapon && (
          <Item 
            baseItem={selectedWeapon}
            prefix="Antonius"
            suffix="of Assassination"
            rarity={weaponRarity}
            conditioned={weaponConditioned}
          />
        )}
      </div>
      
      {stats && (
        <div>
          <h4>Calculated Stats:</h4>
          <table style={{ width: '100%', borderCollapse: 'collapse' }}>
            <tbody>
              <tr>
                <td style={{ padding: '8px', borderBottom: '1px solid #3a3a3a' }}>Name:</td>
                <td style={{ padding: '8px', borderBottom: '1px solid #3a3a3a', color: '#c2a66a' }}>{stats.name}</td>
              </tr>
              <tr>
                <td style={{ padding: '8px', borderBottom: '1px solid #3a3a3a' }}>Rarity:</td>
                <td style={{ padding: '8px', borderBottom: '1px solid #3a3a3a', color: '#c2a66a' }}>{stats.rarity}</td>
              </tr>
              {stats.damage && (
                <tr>
                  <td style={{ padding: '8px', borderBottom: '1px solid #3a3a3a' }}>Damage:</td>
                  <td style={{ padding: '8px', borderBottom: '1px solid #3a3a3a', color: '#ff6b6b' }}>
                    {stats.damage.min} - {stats.damage.max}
                  </td>
                </tr>
              )}
              <tr>
                <td style={{ padding: '8px', borderBottom: '1px solid #3a3a3a' }}>Durability:</td>
                <td style={{ padding: '8px', borderBottom: '1px solid #3a3a3a', color: '#6b9eff' }}>{stats.durability}</td>
              </tr>
              <tr>
                <td style={{ padding: '8px', borderBottom: '1px solid #3a3a3a' }}>Gold Value:</td>
                <td style={{ padding: '8px', borderBottom: '1px solid #3a3a3a', color: '#ffd700' }}>
                  {stats.gold?.toLocaleString()}
                </td>
              </tr>
              <tr>
                <td style={{ padding: '8px', borderBottom: '1px solid #3a3a3a' }}>Conditioning:</td>
                <td style={{ padding: '8px', borderBottom: '1px solid #3a3a3a' }}>
                  {stats.conditioning.current} / {stats.conditioning.max}
                </td>
              </tr>
              <tr>
                <td style={{ padding: '8px', borderBottom: '1px solid #3a3a3a' }}>Total Multiplier:</td>
                <td style={{ padding: '8px', borderBottom: '1px solid #3a3a3a', color: '#1eff00' }}>
                  Ã—{stats.bonusMultiplier.toFixed(2)}
                </td>
              </tr>
            </tbody>
          </table>
        </div>
      )}
      
      <div style={{ marginTop: '20px', padding: '10px', background: '#2a2a2a', borderRadius: '4px', fontSize: '12px' }}>
        <strong>ðŸ“Š For Character Planner Integration:</strong>
        <pre style={{ marginTop: '10px', overflow: 'auto' }}>
          {JSON.stringify(stats, null, 2)}
        </pre>
      </div>
    </div>
  );
};

<CharacterPlanner />

## How to Use in Your Character Planner

```tsx
import { calculateItemStats } from '@site/src/components/Item';

// Calculate total character stats
function calculateCharacterStats(equipment) {
  let totalDamage = { min: 0, max: 0 };
  let totalArmor = 0;
  let totalStats = {};
  
  // For each equipped item
  equipment.forEach(({ baseItem, rarity, conditioned, prefix, suffix }) => {
    const itemStats = calculateItemStats(baseItem, rarity, conditioned, prefix, suffix);
    
    // Add damage
    if (itemStats.damage) {
      totalDamage.min += itemStats.damage.min;
      totalDamage.max += itemStats.damage.max;
    }
    
    // Add armor
    if (itemStats.armor) {
      totalArmor += itemStats.armor;
    }
    
    // Combine stats from prefixes/suffixes
    Object.entries(itemStats.stats).forEach(([stat, value]) => {
      totalStats[stat] = (totalStats[stat] || 0) + value;
    });
  });
  
  return { totalDamage, totalArmor, totalStats };
}
```

This allows you to build a full character equipment planner where users can:
- Select items for each slot (weapon, shield, armor, helmet, etc.)
- Choose rarity for each item
- Toggle conditioning on/off
- See calculated stats in real-time
- Export/save character builds
