import React from 'react';
import Item, { calculateItemStats } from '@site/src/components/Item';
import basesData from '@site/static/data/items/bases.json';

# Item Component Demo

This page demonstrates the new `Item` component that displays items based on base items from `bases.json` with automatic stat calculation based on rarity and conditioning.

## How It Works

- **Base Item (white/common)**: No prefix or suffix
- **Green Item**: Has prefix and/or suffix
- **Durability & Conditioning Multipliers:**
  - Common/Green: ×1.0
  - Blue: ×1.5
  - Purple: ×2.5
  - Orange: ×3.0
  - Red: ×3.5
- **Conditioning Bonus**: Adds ×0.5 more (equivalent to moving up one rarity tier)
  - Green conditioned = Blue stats
  - Blue conditioned = Purple stats
  - etc.
- **Damage**: Uses flat additions (not multipliers) based on effective tier:
  - Green/Blue: Base damage
  - Purple (or Blue+Cond): +1 to max damage
  - Orange (or Purple+Cond): +1 to min, +2 to max
  - Red (or Orange+Cond): +2 to min, +3 to max
  - Red+Cond: +3 to min, +4 to max
- **Best Item**: Red + Conditioned = ×4.0 multiplier for durability/conditioning

## Example Usage

### Basic Base Item (White/Common)

A base item without prefix or suffix is automatically white/common:

```tsx
import Item from '@site/src/components/Item';

<Item baseItem={club} />
```

export const ExampleBasic = () => {
  const club = basesData.find(item => item.name === 'Long sword');
  
  return club ? <Item baseItem={club} rarity="orange" conditioned="true" /> : null;
};

<ExampleBasic />

### Green Item with Prefix or Suffix

Adding a prefix or suffix automatically makes it green:

export const ExampleGreen = () => {
  const club = basesData.find(item => item.name === 'Club');
  
  return club ? (
    <div>
      <Item baseItem={club} prefix="Antonius" />
      {' '}
      <Item baseItem={club} suffix="of Power" />
      {' '}
      <Item baseItem={club} prefix="Antonius" suffix="of Power" />
    </div>
  ) : null;
};

<ExampleGreen />

### Different Rarities

Watch how stats increase with each rarity level:

export const ExampleRarities = () => {
  const club = basesData.find(item => item.name === 'Club');
  
  return club ? (
    <div>
      <Item baseItem={club} rarity="common" />
      {' '}
      <Item baseItem={club} rarity="green" prefix="Strong" />
      {' '}
      <Item baseItem={club} rarity="blue" prefix="Strong" />
      {' '}
      <Item baseItem={club} rarity="purple" prefix="Strong" />
      {' '}
      <Item baseItem={club} rarity="orange" prefix="Strong" />
      {' '}
      <Item baseItem={club} rarity="red" prefix="Strong" />
    </div>
  ) : null;
};

<ExampleRarities />

### Conditioned vs Non-Conditioned

Conditioning adds an additional 25% bonus:

export const ExampleConditioning = () => {
  const sword = basesData.find(item => item.name === 'Long sword');
  
  return sword ? (
    <div>
      <p><strong>Red Item - Not Conditioned:</strong></p>
      <Item baseItem={sword} rarity="red" prefix="Antonius" suffix="of Assassination" conditioned={false} />
      
      <p><strong>Red Item - Conditioned (Best Possible):</strong></p>
      <Item baseItem={sword} rarity="red" prefix="Antonius" suffix="of Assassination" conditioned={true} />
    </div>
  ) : null;
};

<ExampleConditioning />

### Complete Example with All Features

export const ExampleComplete = () => {
  const sword = basesData.find(item => item.name === 'Long sword');
  
  return sword ? (
    <Item 
      baseItem={sword} 
      prefix="Antonius"
      suffix="of Assassination"
      rarity="red"
      conditioned={true}
      enchantValue={33}
    />
  ) : null;
};

<ExampleComplete />

<ExampleComplete />

### Programmatic Stats Calculation

The `calculateItemStats` function is exported for use in character planners:

```tsx
import { calculateItemStats } from '@site/src/components/Item';

const stats = calculateItemStats(
  baseItem,
  'red',      // rarity
  true,       // conditioned
  'Antonius', // prefix
  'of Assassination' // suffix
);

// stats.damage -> { min: number, max: number }
// stats.armor -> number
// stats.durability -> number
// stats.stats -> { "Strength": 10, ... }
// stats.bonusMultiplier -> 2.5 (for red + conditioned)
```

export const ExampleCalculation = () => {
  const sword = basesData.find(item => item.name === 'Long sword');
  
  if (!sword) return null;
  
  const baseStats = calculateItemStats(sword, 'common', false);
  const redStats = calculateItemStats(sword, 'red', false, 'Antonius', 'of Assassination');
  const redConditioned = calculateItemStats(sword, 'red', true, 'Antonius', 'of Assassination');
  
  return (
    <div>
      <table>
        <thead>
          <tr>
            <th>Item</th>
            <th>Damage</th>
            <th>Durability</th>
            <th>Gold</th>
            <th>Multiplier</th>
          </tr>
        </thead>
        <tbody>
          <tr>
            <td>{baseStats.name}</td>
            <td>{baseStats.damage?.min} - {baseStats.damage?.max}</td>
            <td>{baseStats.durability}</td>
            <td>{baseStats.gold}</td>
            <td>×{baseStats.bonusMultiplier}</td>
          </tr>
          <tr>
            <td>{redStats.name}</td>
            <td>{redStats.damage?.min} - {redStats.damage?.max}</td>
            <td>{redStats.durability}</td>
            <td>{redStats.gold}</td>
            <td>×{redStats.bonusMultiplier}</td>
          </tr>
          <tr>
            <td>{redConditioned.name} (Conditioned)</td>
            <td>{redConditioned.damage?.min} - {redConditioned.damage?.max}</td>
            <td>{redConditioned.durability}</td>
            <td>{redConditioned.gold}</td>
            <td>×{redConditioned.bonusMultiplier}</td>
          </tr>
        </tbody>
      </table>
    </div>
  );
};

<ExampleCalculation />

### All Item Types

Here's one item from each type:

export const AllTypes = () => {
  const weapon = basesData.find(item => item.type === 'weapons');
  const shield = basesData.find(item => item.type === 'shields');
  const armor = basesData.find(item => item.type === 'armor');
  const helmet = basesData.find(item => item.type === 'helmets');
  const gloves = basesData.find(item => item.type === 'gloves');
  const shoes = basesData.find(item => item.type === 'shoes');
  const ring = basesData.find(item => item.type === 'rings');
  const amulet = basesData.find(item => item.type === 'amulets');
  
  return (
    <div>
      {weapon && <><Item baseItem={weapon} /> </>}
      {shield && <><Item baseItem={shield} /> </>}
      {armor && <><Item baseItem={armor} /> </>}
      {helmet && <><Item baseItem={helmet} /> </>}
      {gloves && <><Item baseItem={gloves} /> </>}
      {shoes && <><Item baseItem={shoes} /> </>}
      {ring && <><Item baseItem={ring} /> </>}
      {amulet && <><Item baseItem={amulet} /> </>}
    </div>
  );
};

<AllTypes />

## Component Props

### Item Component

- `baseItem` (required): The base item object from bases.json
- `prefix` (optional): Prefix name (string) or PrefixSuffix object with stats
- `suffix` (optional): Suffix name (string) or SuffixSuffix object with stats  
- `rarity` (optional): Item rarity - auto-detected as 'common' (no prefix/suffix) or 'green' (with prefix/suffix)
- `conditioned` (optional): Boolean indicating if item is conditioned. Default: false
- `enchantValue` (optional): Enchantment damage value
- `hideTooltip` (optional): Only show icon, hide tooltip (useful for character planner UI)

### Rarity System

- **common** (white): Base item, no modifiers (×1.0)
- **green**: Has prefix/suffix (×1.0)
- **blue**: ×1.5 multiplier
- **purple**: ×2.5 multiplier
- **orange**: ×3.0 multiplier (damage +1 max)
- **red**: ×3.5 multiplier (damage +2 max)
- **+ Conditioned**: Adds ×0.5 (e.g., red conditioned = ×4.0, damage +1 min +3 max)

## TypeScript Interfaces

```typescript
interface BaseItem {
  name: string;
  type: 'weapons' | 'shields' | 'armor' | 'helmets' | 'gloves' | 'shoes' | 'rings' | 'amulets';
  level: number | null;
  damageMin?: number;
  damageMax?: number;
  armor?: number | null;
  durability: number | null;
  conditioning: number | null;
  gold: number | null;
  image: string;
  materials: Record<string, number>;
}

interface PrefixSuffix {
  name: string;
  stats?: Record<string, number>; // e.g., { "Strength": 10, "Dexterity": 5 }
  damageBonus?: number; // Flat damage bonus
  armorBonus?: number; // Flat armor bonus
}

interface CalculatedItemStats {
  name: string;
  rarity: ItemRarity;
  damage?: { min: number; max: number };
  armor?: number;
  durability?: number;
  conditioning: { current: number; max: number };
  gold?: number;
  stats: Record<string, number>; // Combined stats from prefix/suffix
  bonusMultiplier: number; // Total multiplier applied
}
```

## Future: Prefix/Suffix with Stats

When you're ready to implement prefix/suffix stats, you can pass objects instead of strings:

```tsx
const antonius = {
  name: "Antonius",
  stats: { "Strength": 15, "Constitution": 10 },
  damageBonus: 5
};

const ofAssassination = {
  name: "of Assassination",
  stats: { "Dexterity": 20, "Agility": 15 },
  damageBonus: 8
};

<Item 
  baseItem={sword}
  prefix={antonius}
  suffix={ofAssassination}
  rarity="red"
  conditioned={true}
/>
```

The stats will automatically appear in the tooltip and be available via `calculateItemStats` for your character planner!
